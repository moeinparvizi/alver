<div class="bg-whitee comments px-4 py-8 shadow-xl rounded-xl m-3">
  <div class="flex gap-2 w-full justify-end items-center">
    <span class="w-full bg-primary" style="height: 1px"></span>
    <span class="rounded-full flex !w-3 !h-3 bg-primary"></span>
    <h2 class="text-right text-secondary text-2xl w-96 md:w-60">نظرات</h2>
  </div>

  <section dir="rtl" class="dark:bg-gray-900 py-8 lg:py-16 antialiased">
    <div class="max-w-2xl mx-auto px-4">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-lg lg:text-2xl font-bold text-gray-900 text-gray">
          تعداد نظرات ({{ comments?.count }})
        </h2>
      </div>
      <div
        class="py-2 px-4 mb-4 bg-white rounded-lg rounded-t-lg border border-gray">
        <label for="comment" class="sr-only">Your comment</label>
        <input
          type="text"
          class="bg-white mb-5 focus:outline-none text-black"
          placeholder="عنوان نظر"
          [(ngModel)]="title" />
        <textarea
          id="comment"
          rows="6"
          [(ngModel)]="text"
          class="px-0 w-full text-sm text-gray-900 border-0 focus:ring-0 focus:outline-none bg-white text-black"
          placeholder="نظر خود را با ما در ارتباط بگزارید..."
          required></textarea>
      </div>
      <div class="flex justify-between items-center">
        <button mat-flat-button color="primary" (click)="onSendData()">
          ثبت نظر
        </button>
        <div class="star-rating">
          <div class="star-rating">
            <input
              type="radio"
              id="star5"
              name="rating"
              value="5"
              (change)="onRatingChange($event)" />
            <label for="star5" title="5 stars">&#9733;</label>

            <input
              type="radio"
              id="star4"
              name="rating"
              value="4"
              (change)="onRatingChange($event)" />
            <label for="star4" title="4 stars">&#9733;</label>

            <input
              type="radio"
              id="star3"
              name="rating"
              value="3"
              (change)="onRatingChange($event)" />
            <label for="star3" title="3 stars">&#9733;</label>

            <input
              type="radio"
              id="star2"
              name="rating"
              value="2"
              (change)="onRatingChange($event)" />
            <label for="star2" title="2 stars">&#9733;</label>

            <input
              type="radio"
              id="star1"
              name="rating"
              value="1"
              (change)="onRatingChange($event)" />
            <label for="star1" title="1 star">&#9733;</label>
          </div>
        </div>
      </div>

      @if (!isLoading) {
        @for (comment of comments.data; track $index) {
          <article class="p-6 mb-3 mt-3 text-base bg-white rounded-lg">
            <footer class="flex justify-between items-center mb-2">
              <div class="flex items-center justify-between w-full">
                <p
                  class="inline-flex items-center mr-3 text-sm text-primary font-semibold">
                  <img
                    class="ml-3 w-16 h-16 rounded-full"
                    src="/assets/images/user.jpg"
                    alt="user picture" />
                  {{ comment.user }}
                </p>
                <p class="text-sm text-gray">
                  <time
                    pubdate
                    datetime="2022-02-08"
                    title="February 8th, 2022">
                    {{ comment.date }}
                  </time>
                </p>
                <div class="flex">
          <div *ngFor="let item of comment.rate | generateArray; let i = index" class="inline">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                class="size-6 text-primary">
                <path
                  fill-rule="evenodd"
                  d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z"
                  clip-rule="evenodd" />
              </svg>
            </div>
          </div>
              </div>
            </footer>
            <h6 class="text-black">
              {{ comment.title }}
            </h6>
            <p class="text-gray">
              {{ comment.text }}
            </p>
          </article>
        }
      } @else {
        <app-spinner></app-spinner>
      }
    </div>
  </section>
</div>
